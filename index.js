const axios = require("axios");
const { exec } = require("child_process");

const locations = [
  "impfterminservice_cor20357",
  "impfterminservice_cor20357_biontech",
  "impfterminservice_cor20357_moderna",
  "impfterminservice_cor20357_astra_zeneca",
  "impfterminservice_imp38889",
  "impfterminservice_imp38889_biontech",
  "impfterminservice_imp38889_moderna",
  "impfterminservice_imp38889_astra_zeneca",
  "impfterminservice_kiz71297",
  "impfterminservice_kiz71297_biontech",
  "impfterminservice_kiz71297_moderna",
  "impfterminservice_kiz71297_astra_zeneca",
  "impfterminservice_imp06249",
  "impfterminservice_imp06249_biontech",
  "impfterminservice_imp06249_moderna",
  "impfterminservice_imp06249_astra_zeneca",
  "impfterminservice_mes77656",
  "impfterminservice_mes77656_biontech",
  "impfterminservice_mes77656_moderna",
  "impfterminservice_mes77656_astra_zeneca",
  "impfterminservice_kre76646",
  "impfterminservice_kre76646_biontech",
  "impfterminservice_kre76646_moderna",
  "impfterminservice_kre76646_astra_zeneca",
  "impfterminservice_kre97980",
  "impfterminservice_kre97980_biontech",
  "impfterminservice_kre97980_moderna",
  "impfterminservice_kre97980_astra_zeneca",
  "impfterminservice_kre78628",
  "impfterminservice_kre78628_biontech",
  "impfterminservice_kre78628_moderna",
  "impfterminservice_kre78628_astra_zeneca",
  "impfterminservice_con89522",
  "impfterminservice_con89522_biontech",
  "impfterminservice_con89522_moderna",
  "impfterminservice_con89522_astra_zeneca",
  "impfterminservice_imp14612",
  "impfterminservice_imp14612_biontech",
  "impfterminservice_imp14612_moderna",
  "impfterminservice_imp14612_astra_zeneca",
  "impfterminservice_kre74821",
  "impfterminservice_kre74821_biontech",
  "impfterminservice_kre74821_moderna",
  "impfterminservice_kre74821_astra_zeneca",
  "impfterminservice_kre76137",
  "impfterminservice_kre76137_biontech",
  "impfterminservice_kre76137_moderna",
  "impfterminservice_kre76137_astra_zeneca",
  "impfterminservice_sta39288",
  "impfterminservice_sta39288_biontech",
  "impfterminservice_sta39288_moderna",
  "impfterminservice_sta39288_astra_zeneca",
  "impfterminservice_imp06526",
  "impfterminservice_imp06526_biontech",
  "impfterminservice_imp06526_moderna",
  "impfterminservice_imp06526_astra_zeneca",
  "impfterminservice_imp39114",
  "impfterminservice_imp39114_biontech",
  "impfterminservice_imp39114_moderna",
  "impfterminservice_imp39114_astra_zeneca",
  "impfterminservice_obe88212",
  "impfterminservice_obe88212_biontech",
  "impfterminservice_obe88212_moderna",
  "impfterminservice_obe88212_astra_zeneca",
  "impfterminservice_anh06847",
  "impfterminservice_anh06847_biontech",
  "impfterminservice_anh06847_moderna",
  "impfterminservice_anh06847_astra_zeneca",
  "impfterminservice_kre88367",
  "impfterminservice_kre88367_biontech",
  "impfterminservice_kre88367_moderna",
  "impfterminservice_kre88367_astra_zeneca",
  "impfterminservice_kre89584",
  "impfterminservice_kre89584_biontech",
  "impfterminservice_kre89584_moderna",
  "impfterminservice_kre89584_astra_zeneca",
  "impfterminservice_imp71636",
  "impfterminservice_imp71636_biontech",
  "impfterminservice_imp71636_moderna",
  "impfterminservice_imp71636_astra_zeneca",
  "impfterminservice_kre74081",
  "impfterminservice_kre74081_biontech",
  "impfterminservice_kre74081_moderna",
  "impfterminservice_kre74081_astra_zeneca",
  "impfterminservice_unt06618",
  "impfterminservice_unt06618_biontech",
  "impfterminservice_unt06618_moderna",
  "impfterminservice_unt06618_astra_zeneca",
  "impfterminservice_imp06366",
  "impfterminservice_imp06366_biontech",
  "impfterminservice_imp06366_moderna",
  "impfterminservice_imp06366_astra_zeneca",
  "impfterminservice_kre79341",
  "impfterminservice_kre79341_biontech",
  "impfterminservice_kre79341_moderna",
  "impfterminservice_kre79341_astra_zeneca",
  "impfterminservice_imp38871",
  "impfterminservice_imp38871_biontech",
  "impfterminservice_imp38871_moderna",
  "impfterminservice_imp38871_astra_zeneca",
  "impfterminservice_kiz74549",
  "impfterminservice_kiz74549_biontech",
  "impfterminservice_kiz74549_moderna",
  "impfterminservice_kiz74549_astra_zeneca",
  "impfterminservice_kiz77933",
  "impfterminservice_kiz77933_biontech",
  "impfterminservice_kiz77933_moderna",
  "impfterminservice_kiz77933_astra_zeneca",
  "impfterminservice_imp14712",
  "impfterminservice_imp14712_biontech",
  "impfterminservice_imp14712_moderna",
  "impfterminservice_imp14712_astra_zeneca",
  "impfterminservice_imp29410",
  "impfterminservice_imp29410_biontech",
  "impfterminservice_imp29410_moderna",
  "impfterminservice_imp29410_astra_zeneca",
  "impfterminservice_imp06268",
  "impfterminservice_imp06268_biontech",
  "impfterminservice_imp06268_moderna",
  "impfterminservice_imp06268_astra_zeneca",
  "impfterminservice_kre79379",
  "impfterminservice_kre79379_biontech",
  "impfterminservice_kre79379_moderna",
  "impfterminservice_kre79379_astra_zeneca",
  "impfterminservice_zen79108",
  "impfterminservice_zen79108_biontech",
  "impfterminservice_zen79108_moderna",
  "impfterminservice_zen79108_astra_zeneca",
  "impfterminservice_mai68163",
  "impfterminservice_mai68163_biontech",
  "impfterminservice_mai68163_moderna",
  "impfterminservice_mai68163_astra_zeneca",
  "impfterminservice_imp16225",
  "impfterminservice_imp16225_biontech",
  "impfterminservice_imp16225_moderna",
  "impfterminservice_imp16225_astra_zeneca",
  "impfterminservice_imp06198",
  "impfterminservice_imp06198_biontech",
  "impfterminservice_imp06198_moderna",
  "impfterminservice_imp06198_astra_zeneca",
  "impfterminservice_imp39576",
  "impfterminservice_imp39576_biontech",
  "impfterminservice_imp39576_moderna",
  "impfterminservice_imp39576_astra_zeneca",
  "impfterminservice_imp38855",
  "impfterminservice_imp38855_biontech",
  "impfterminservice_imp38855_moderna",
  "impfterminservice_imp38855_astra_zeneca",
  "impfterminservice_imp14770",
  "impfterminservice_imp14770_biontech",
  "impfterminservice_imp14770_moderna",
  "impfterminservice_imp14770_astra_zeneca",
  "impfterminservice_imp06217",
  "impfterminservice_imp06217_biontech",
  "impfterminservice_imp06217_moderna",
  "impfterminservice_imp06217_astra_zeneca",
  "impfterminservice_kiz72213",
  "impfterminservice_kiz72213_biontech",
  "impfterminservice_kiz72213_moderna",
  "impfterminservice_kiz72213_astra_zeneca",
  "impfterminservice_kiz79541",
  "impfterminservice_kiz79541_biontech",
  "impfterminservice_kiz79541_moderna",
  "impfterminservice_kiz79541_astra_zeneca",
  "impfterminservice_imp06110",
  "impfterminservice_imp06110_biontech",
  "impfterminservice_imp06110_moderna",
  "impfterminservice_imp06110_astra_zeneca",
  "impfterminservice_imp16515",
  "impfterminservice_imp16515_biontech",
  "impfterminservice_imp16515_moderna",
  "impfterminservice_imp16515_astra_zeneca",
  "impfterminservice_kiz77656",
  "impfterminservice_kiz77656_biontech",
  "impfterminservice_kiz77656_moderna",
  "impfterminservice_kiz77656_astra_zeneca",
  "impfterminservice_imp38820",
  "impfterminservice_imp38820_biontech",
  "impfterminservice_imp38820_moderna",
  "impfterminservice_imp38820_astra_zeneca",
  "impfterminservice_imp39418",
  "impfterminservice_imp39418_biontech",
  "impfterminservice_imp39418_moderna",
  "impfterminservice_imp39418_astra_zeneca",
  "impfterminservice_unt06647",
  "impfterminservice_unt06647_biontech",
  "impfterminservice_unt06647_moderna",
  "impfterminservice_unt06647_astra_zeneca",
  "impfterminservice_kre72280",
  "impfterminservice_kre72280_biontech",
  "impfterminservice_kre72280_moderna",
  "impfterminservice_kre72280_astra_zeneca",
  "impfterminservice_unt06112",
  "impfterminservice_unt06112_biontech",
  "impfterminservice_unt06112_moderna",
  "impfterminservice_unt06112_astra_zeneca",
  "impfterminservice_wer73037",
  "impfterminservice_wer73037_biontech",
  "impfterminservice_wer73037_moderna",
  "impfterminservice_wer73037_astra_zeneca",
  "impfterminservice_kre88444",
  "impfterminservice_kre88444_biontech",
  "impfterminservice_kre88444_moderna",
  "impfterminservice_kre88444_astra_zeneca",
  "impfterminservice_unt06114",
  "impfterminservice_unt06114_biontech",
  "impfterminservice_unt06114_moderna",
  "impfterminservice_unt06114_astra_zeneca",
  "impfterminservice_imp03042",
  "impfterminservice_imp03042_biontech",
  "impfterminservice_imp03042_moderna",
  "impfterminservice_imp03042_astra_zeneca",
  "impfterminservice_kre74613",
  "impfterminservice_kre74613_biontech",
  "impfterminservice_kre74613_moderna",
  "impfterminservice_kre74613_astra_zeneca",
  "impfterminservice_ges69123",
  "impfterminservice_ges69123_biontech",
  "impfterminservice_ges69123_moderna",
  "impfterminservice_ges69123_astra_zeneca",
  "impfterminservice_imp76287",
  "impfterminservice_imp76287_biontech",
  "impfterminservice_imp76287_moderna",
  "impfterminservice_imp76287_astra_zeneca",
  "impfterminservice_imp06686",
  "impfterminservice_imp06686_biontech",
  "impfterminservice_imp06686_moderna",
  "impfterminservice_imp06686_astra_zeneca",
  "impfterminservice_kre71334",
  "impfterminservice_kre71334_biontech",
  "impfterminservice_kre71334_moderna",
  "impfterminservice_kre71334_astra_zeneca",
  "impfterminservice_imp14943",
  "impfterminservice_imp14943_biontech",
  "impfterminservice_imp14943_moderna",
  "impfterminservice_imp14943_astra_zeneca",
  "impfterminservice_ziz74585",
  "impfterminservice_ziz74585_biontech",
  "impfterminservice_ziz74585_moderna",
  "impfterminservice_ziz74585_astra_zeneca",
  "impfterminservice_kre79761",
  "impfterminservice_kre79761_biontech",
  "impfterminservice_kre79761_moderna",
  "impfterminservice_kre79761_astra_zeneca",
  "impfterminservice_kre75175",
  "impfterminservice_kre75175_biontech",
  "impfterminservice_kre75175_moderna",
  "impfterminservice_kre75175_astra_zeneca",
  "impfterminservice_kre74889",
  "impfterminservice_kre74889_biontech",
  "impfterminservice_kre74889_moderna",
  "impfterminservice_kre74889_astra_zeneca",
  "impfterminservice_kre77815",
  "impfterminservice_kre77815_biontech",
  "impfterminservice_kre77815_moderna",
  "impfterminservice_kre77815_astra_zeneca",
  "impfterminservice_imp06484",
  "impfterminservice_imp06484_biontech",
  "impfterminservice_imp06484_moderna",
  "impfterminservice_imp06484_astra_zeneca",
  "impfterminservice_kre78532",
  "impfterminservice_kre78532_biontech",
  "impfterminservice_kre78532_moderna",
  "impfterminservice_kre78532_astra_zeneca",
  "impfterminservice_kre74360",
  "impfterminservice_kre74360_biontech",
  "impfterminservice_kre74360_moderna",
  "impfterminservice_kre74360_astra_zeneca",
  "impfterminservice_imp39340",
  "impfterminservice_imp39340_biontech",
  "impfterminservice_imp39340_moderna",
  "impfterminservice_imp39340_astra_zeneca",
  "impfterminservice_imp06766",
  "impfterminservice_imp06766_biontech",
  "impfterminservice_imp06766_moderna",
  "impfterminservice_imp06766_astra_zeneca",
  "impfterminservice_imp70174",
  "impfterminservice_imp70174_biontech",
  "impfterminservice_imp70174_moderna",
  "impfterminservice_imp70174_astra_zeneca",
  "impfterminservice_zen89073",
  "impfterminservice_zen89073_biontech",
  "impfterminservice_zen89073_moderna",
  "impfterminservice_zen89073_astra_zeneca",
  "impfterminservice_kre72469",
  "impfterminservice_kre72469_biontech",
  "impfterminservice_kre72469_moderna",
  "impfterminservice_kre72469_astra_zeneca",
  "impfterminservice_lan78056",
  "impfterminservice_lan78056_biontech",
  "impfterminservice_lan78056_moderna",
  "impfterminservice_lan78056_astra_zeneca",
  "impfterminservice_imp39638",
  "impfterminservice_imp39638_biontech",
  "impfterminservice_imp39638_moderna",
  "impfterminservice_imp39638_astra_zeneca",
  "impfterminservice_unt06712",
  "impfterminservice_unt06712_biontech",
  "impfterminservice_unt06712_moderna",
  "impfterminservice_unt06712_astra_zeneca",
  "impfterminservice_kiz73730",
  "impfterminservice_kiz73730_biontech",
  "impfterminservice_kiz73730_moderna",
  "impfterminservice_kiz73730_astra_zeneca",
  "impfterminservice_imp17291",
  "impfterminservice_imp17291_biontech",
  "impfterminservice_imp17291_moderna",
  "impfterminservice_imp17291_astra_zeneca",
  "impfterminservice_imp12529",
  "impfterminservice_imp12529_biontech",
  "impfterminservice_imp12529_moderna",
  "impfterminservice_imp12529_astra_zeneca",
  "impfterminservice_kre78224",
  "impfterminservice_kre78224_biontech",
  "impfterminservice_kre78224_moderna",
  "impfterminservice_kre78224_astra_zeneca",
  "impfterminservice_pau72072",
  "impfterminservice_pau72072_biontech",
  "impfterminservice_pau72072_moderna",
  "impfterminservice_pau72072_astra_zeneca",
  "impfterminservice_imp04910",
  "impfterminservice_imp04910_biontech",
  "impfterminservice_imp04910_moderna",
  "impfterminservice_imp04910_astra_zeneca",
  "impfterminservice_kiz71065",
  "impfterminservice_kiz71065_biontech",
  "impfterminservice_kiz71065_moderna",
  "impfterminservice_kiz71065_astra_zeneca",
  "impfterminservice_imp15234",
  "impfterminservice_imp15234_biontech",
  "impfterminservice_imp15234_moderna",
  "impfterminservice_imp15234_astra_zeneca",
  "impfterminservice_imp06886",
  "impfterminservice_imp06886_biontech",
  "impfterminservice_imp06886_moderna",
  "impfterminservice_imp06886_astra_zeneca",
  "impfterminservice_imp70376",
  "impfterminservice_imp70376_biontech",
  "impfterminservice_imp70376_moderna",
  "impfterminservice_imp70376_astra_zeneca",
  "impfterminservice_imp14482",
  "impfterminservice_imp14482_biontech",
  "impfterminservice_imp14482_moderna",
  "impfterminservice_imp14482_astra_zeneca",
  "impfterminservice_zen69124",
  "impfterminservice_zen69124_biontech",
  "impfterminservice_zen69124_moderna",
  "impfterminservice_zen69124_astra_zeneca",
  "impfterminservice_kre88045",
  "impfterminservice_kre88045_biontech",
  "impfterminservice_kre88045_moderna",
  "impfterminservice_kre88045_astra_zeneca",
  "impfterminservice_kre75056",
  "impfterminservice_kre75056_biontech",
  "impfterminservice_kre75056_moderna",
  "impfterminservice_kre75056_astra_zeneca",
  "impfterminservice_imp39624",
  "impfterminservice_imp39624_biontech",
  "impfterminservice_imp39624_moderna",
  "impfterminservice_imp39624_astra_zeneca",
  "impfterminservice_imp19348",
  "impfterminservice_imp19348_biontech",
  "impfterminservice_imp19348_moderna",
  "impfterminservice_imp19348_astra_zeneca",
  "impfterminservice_kiz70629",
  "impfterminservice_kiz70629_biontech",
  "impfterminservice_kiz70629_moderna",
  "impfterminservice_kiz70629_astra_zeneca",
  "impfterminservice_imp16866",
  "impfterminservice_imp16866_biontech",
  "impfterminservice_imp16866_moderna",
  "impfterminservice_imp16866_astra_zeneca",
  "impfterminservice_kre69469",
  "impfterminservice_kre69469_biontech",
  "impfterminservice_kre69469_moderna",
  "impfterminservice_kre69469_astra_zeneca",
  "impfterminservice_kiz76530",
  "impfterminservice_kiz76530_biontech",
  "impfterminservice_kiz76530_moderna",
  "impfterminservice_kiz76530_astra_zeneca",
  "impfterminservice_sta72762",
  "impfterminservice_sta72762_biontech",
  "impfterminservice_sta72762_moderna",
  "impfterminservice_sta72762_astra_zeneca",
  "impfterminservice_kiz73430",
  "impfterminservice_kiz73430_biontech",
  "impfterminservice_kiz73430_moderna",
  "impfterminservice_kiz73430_astra_zeneca",
];

(async () => {
  try {
    const response = await axios.patch(
      "https://impfterminradar.de/api/vaccinations/availability",
      locations
    );

    // console.log(response.data);

    console.log(`Checking ${response.data.length} entries…`);
    const hits = response.data.filter((entry) => entry.Available === true);
    console.log(`${hits.length} available!`);

    if (hits.length > 0) {
      // exec("say AVAILABLE!");

      for (const hit of hits) {
        const slug = hit.Slug;
        const numericRegex = /\d+/;
        const zipCode = slug.match(numericRegex);

        console.log(hit);
        console.log(
          `https://005-iz.impfterminservice.de/impftermine/service?plz=${zipCode[0]}`
        );
      }
    }
  } catch (error) {
    console.log(error);
  }
})();
